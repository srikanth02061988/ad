import static org.mockito.Mockito.*;
import org.mockito.*;
import org.junit.jupiter.api.*;
import java.net.http.HttpResponse;
import java.net.http.HttpClient;

class BlobStorageTriggerFunctionTest {

    @BeforeEach
    void setUp() {
        try (MockedStatic<DatabricksUtil> mockedStatic = Mockito.mockStatic(DatabricksUtil.class)) {
            // Prepare the HttpClient and Response mocks
            HttpClient client = mock(HttpClient.class);
            HttpResponse<String> response = mock(HttpResponse.class);
            when(response.body()).thenReturn("{\"run_id\": \"12345\"}");
            when(response.statusCode()).thenReturn(200);
            when(client.send(any(HttpRequest.class), any(HttpResponse.BodyHandler.class)))
                .thenReturn(response);

            // Mock static methods
            mockedStatic.when(() -> DatabricksUtil.createPostRequest(any(URI.class), any(JSONObject.class)))
                .thenReturn(mock(HttpRequest.class));
            mockedStatic.when(() -> DatabricksUtil.getHttpClient(anyBoolean()))
                .thenReturn(client);
        }
    }

    @Test
    void testTriggerDBJob() throws Exception {
        BlobStorageTriggerFunction function = new BlobStorageTriggerFunction();
        String result = function.triggerDBJob(new HashMap<>(), new JSONObject());
        Assertions.assertEquals("12345", result);
    }
}


import org.junit.jupiter.api.*;
import org.mockito.*;
import java.net.http.HttpResponse;
import java.net.http.HttpClient;
import java.net.URI;
import java.net.http.HttpRequest;

import static org.mockito.Mockito.*;

class BlobStorageTriggerFunctionTest {

    @Test
    void testTriggerDBJob() throws Exception {
        // Arrange
        try (MockedStatic<DatabricksUtil> utilities = Mockito.mockStatic(DatabricksUtil.class)) {
            // Mock the static methods used in the triggerDBJob
            HttpClient mockedClient = mock(HttpClient.class);
            HttpResponse<String> mockedResponse = mock(HttpResponse.class);
            
            when(mockedResponse.body()).thenReturn("{\"run_id\": \"12345\"}");
            when(mockedResponse.statusCode()).thenReturn(200);
            
            when(mockedClient.send(any(HttpRequest.class), any(HttpResponse.BodyHandler.class)))
                .thenReturn(mockedResponse);
            
            utilities.when(() -> DatabricksUtil.getHttpClient(false))
                .thenReturn(mockedClient);
            
            utilities.when(() -> DatabricksUtil.createPostRequest(any(URI.class), any(JSONObject.class)))
                .thenReturn(HttpRequest.newBuilder().uri(URI.create("http://example.com")).build());
            
            BlobStorageTriggerFunction function = new BlobStorageTriggerFunction();
            
            // Act
            String result = function.triggerDBJob(new HashMap<>(), new JSONObject());
            
            // Assert
            Assertions.assertEquals("12345", result);
        }
    }
}
